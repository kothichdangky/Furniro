import{r as u,o as f,s as v,c as w,f as i,e as n,w as o,t as a,v as x,g as c,x as p,y as $,h as B,F as C,z as m,b as T}from"./index-CRIHzQGb.js";import{_ as P}from"./trash-sogljgCe.js";const D=["src"],L=["onClick"],N=["onClick"],S={class:"text-center mt-3"},V={class:"mx-2"},q=Object.assign({name:"AdminShop"},{__name:"adminshop",setup(A){const _=x(),t=u({current_page:1,last_page:1}),d=u([]),r=async(l=1)=>{try{const e=await m.get(`/api/shop?page=${l}`);d.value=e.data.data,t.value.current_page=e.data.current_page,t.value.last_page=e.data.last_page}catch(e){console.error("Lỗi khi lấy dữ liệu sản phẩm:",e)}},b=[{key:"product",label:"Titlet"},{key:"image",label:"Image"},{key:"intro",label:"Description"},{key:"price",label:"Price"},{key:"price_sale",label:"Price sale"},{key:"quantity",label:"Quantity"},{key:"badge",label:"Badge"},{key:"actions",label:""}],y=async l=>{try{const e=await m.delete(`/api/shop/${l}`);alert("xoá thành công"),console.log(e.data.message),r(t.value.current_page)}catch(e){console.error("Lỗi khi xoá:",e)}};return f(r),v(()=>r()),(l,e)=>{const h=$,g=B;return T(),w(C,null,[i(h,{items:a(d),fields:b,"thead-class":"bg-warning-2","table-class":"my-table table-borderless  align-middle text-center"},{"cell(image)":o(s=>[n("img",{src:`http://localhost:8000/storage/${s.item.image}`,width:"100",height:"100"},null,8,D)]),"cell(price)":o(s=>[c(p(s.item.price.toLocaleString())+"đ ",1)]),"cell(actions)":o(s=>[n("span",{style:{cursor:"pointer"},onClick:k=>y(s.item.id)},e[2]||(e[2]=[n("img",{src:P,alt:"Xoá",width:"24",height:"24"},null,-1)]),8,L),n("span",{style:{cursor:"pointer"},class:"border p-2 bg-warning-6",onClick:k=>a(_).push(`/admin/edit/${s.item.id}`)},"+",8,N)]),_:1},8,["items"]),n("div",S,[i(g,{variant:"",class:"me-2 bg-warning-6",disabled:a(t).current_page===1,onClick:e[0]||(e[0]=s=>r(a(t).current_page-1))},{default:o(()=>e[3]||(e[3]=[c(" Trang trước ")])),_:1},8,["disabled"]),n("span",V," Trang "+p(a(t).current_page)+" / "+p(a(t).last_page),1),i(g,{variant:"",class:"ms-2 bg-warning-6",disabled:a(t).current_page===a(t).last_page,onClick:e[1]||(e[1]=s=>r(a(t).current_page+1))},{default:o(()=>e[4]||(e[4]=[c(" Trang sau ")])),_:1},8,["disabled"])])],64)}}});export{q as default};
