import{r as u,l as T,w as n,f as l,e as x,c as F,B as D,t,C as r,h as E,g as P,D as S,F as L,E as N,G as Q,i as q,b as h,z}from"./index-CRIHzQGb.js";import{_ as G,a as M,b as R}from"./BFormTextarea.vue_vue_type_script_setup_true_lang-3ZSab3T0-DznhtSCH.js";const J={__name:"createProduct",setup(j){const s=u(null),m=u([]),_=u([]),i=u(""),c=u(""),f=u(""),p=u(""),v=u(""),V=u(""),w=()=>{_.value.length>=5||(_.value.push(Date.now()),m.value.push(void 0))},U=async()=>{var g;try{console.log("Đã nhấn");const e=new FormData;e.append("product",i.value),e.append("intro",c.value),e.append("price",f.value),e.append("price_sale",p.value),e.append("quantity",v.value),e.append("badge",V.value),s.value&&e.append("image",s.value),m.value.forEach(o=>{o&&e.append("addimage[]",o)});const d=await z.post("/api/shop",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Tạo sản phẩm thành công",d.data),alert("Tạo sản phẩm thành công"),i.value="",c.value="",f.value="",p.value="",p.value="",v.value="",s.value=null,m.value=[],_.value=[]}catch(e){console.log("Lỗi chi tiết:",(g=e.response)==null?void 0:g.data)}};return(g,e)=>{const d=D,o=G,y=M,B=E,$=R,k=Q,C=q;return h(),T(C,null,{default:n(()=>[l(k,{onSubmit:N(U,["prevent"])},{default:n(()=>[l(o,{label:"Product",class:"my-2"},{default:n(()=>[l(d,{modelValue:t(i),"onUpdate:modelValue":e[0]||(e[0]=a=>r(i)?i.value=a:null),id:"Product",placeholder:"Email address"},null,8,["modelValue"])]),_:1}),l(y,{modelValue:t(s),"onUpdate:modelValue":e[1]||(e[1]=a=>r(s)?s.value=a:null),label:"Chọn ảnh sản phẩm",state:!!t(s),accept:"image/*"},null,8,["modelValue","state"]),l(B,{class:"btn-warning mt-3 w-25 text-dark border",onClick:w},{default:n(()=>e[7]||(e[7]=[P("thêm ảnh phụ")])),_:1}),e[9]||(e[9]=x("br",null,null,-1)),(h(!0),F(L,null,S(t(_),(a,b)=>(h(),F("div",{key:a,class:"mt-2"},[l(y,{modelValue:t(m)[b],"onUpdate:modelValue":I=>t(m)[b]=I,label:`Chọn ảnh phụ ${b+1}`,state:!!t(m)[b],accept:"image/*"},null,8,["modelValue","onUpdate:modelValue","label","state"])]))),128)),l(o,{label:"Intro",class:"my-2"},{default:n(()=>[l($,{modelValue:t(c),"onUpdate:modelValue":e[2]||(e[2]=a=>r(c)?c.value=a:null),id:"Intro",placeholder:"Intro"},null,8,["modelValue"])]),_:1}),l(o,{label:"Price",class:"my-2"},{default:n(()=>[l(d,{modelValue:t(f),"onUpdate:modelValue":e[3]||(e[3]=a=>r(f)?f.value=a:null),id:"Price",placeholder:"Price"},null,8,["modelValue"])]),_:1}),l(o,{label:"Price Sale",class:"my-2"},{default:n(()=>[l(d,{modelValue:t(p),"onUpdate:modelValue":e[4]||(e[4]=a=>r(p)?p.value=a:null),id:"Price Sale",placeholder:"Price Sale"},null,8,["modelValue"])]),_:1}),l(o,{label:"Quantity",class:"my-2"},{default:n(()=>[l(d,{modelValue:t(v),"onUpdate:modelValue":e[5]||(e[5]=a=>r(v)?v.value=a:null),id:"Quantity",placeholder:"Quantity"},null,8,["modelValue"])]),_:1}),l(o,{label:"badge",class:"my-2"},{default:n(()=>[l(d,{modelValue:t(V),"onUpdate:modelValue":e[6]||(e[6]=a=>r(V)?V.value=a:null),id:"badge",placeholder:"badge"},null,8,["modelValue"])]),_:1}),l(B,{type:"submit",class:"btn-light w-25 text-dark border"},{default:n(()=>e[8]||(e[8]=[P("tạo mới")])),_:1})]),_:1})]),_:1})}}};export{J as default};
